<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>监控插件测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .error-btn {
            background: #ff4444;
            color: white;
        }
    </style>

    <!-- 监控插件嵌入代码 -->
    <!-- 
      使用方式：
      在 script 标签的 src 属性中添加参数即可，插件会自动初始化
      
      格式：
      <script src="插件地址?key=项目Key&apiUrl=API地址"></script>
      
      示例：
      <script src="http://web.yuwb.cn/plugin/monitoring.js?key=0346c20e5580a8d83b0372089bbfdd8d&apiUrl=http://web.yuwb.cn"></script>
    -->
    <script src="http://web.yuwb.cn/plugin/monitoring.js?key=0346c20e5580a8d83b0372089bbfdd8d&apiUrl=http://web.yuwb.cn"></script>
</head>

<body>
    <h1>监控插件测试页面</h1>
    <p>这是一个测试页面，用于验证监控插件是否正常工作。</p>

    <h2>测试功能</h2>
    <button onclick="testClick()">测试点击事件</button>
    <button onclick="testError()" class="error-btn">测试错误捕获</button>
    <button onclick="testCustomEvent()">测试自定义事件</button>

    <h2>使用说明</h2>
    <ol>
        <li>请先在前端面板创建项目并获取项目 Key</li>
        <li><strong>方式1（推荐）</strong>：通过URL参数加载
            <ul>
                <li>在页面URL后添加参数：<code>?key=项目Key&apiUrl=API地址</code></li>
                <li>例如：<code>example.html?key=0346c20e5580a8d83b0372089bbfdd8d&apiUrl=http://web.yuwb.cn</code></li>
                <li>插件会自动从URL参数读取配置，无需额外代码</li>
            </ul>
        </li>
        <li><strong>方式2</strong>：通过配置对象
            <ul>
                <li>修改页面中的 <code>projectKey</code> 和 <code>apiUrl</code> 配置</li>
                <li>开发环境：apiUrl 设置为 'http://localhost:3002'</li>
                <li>生产环境：apiUrl 设置为同域地址，如 'http://web.yuwb.cn'（无需端口号）</li>
            </ul>
        </li>
        <li>打开此页面，点击上面的按钮测试各种功能</li>
        <li>在前端面板查看收集到的数据</li>
    </ol>

    <script>
        function testClick() {
            alert('点击事件已触发，请在前端面板查看数据');
        }

        function testError() {
            // 故意触发一个错误
            throw new Error('这是一个测试错误');
        }

        function testCustomEvent() {
            if (window.WebPageMonitoring) {
                window.WebPageMonitoring.track('custom', {
                    action: 'test',
                    message: '这是一个自定义事件'
                });
                alert('自定义事件已发送');
            } else {
                alert('监控插件未加载');
            }
        }
    </script>
</body>

</html>